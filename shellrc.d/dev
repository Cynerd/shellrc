# vim: ft=sh:

memcheck() {
	valgrind --track-fds=yes --leak-check=full --track-origins=yes "$@"
}

massif() {
	valgrind --tool=massif "$@"
}

_meson_setup() {
	if [ ! -f "build/build.ninja" ]; then
		meson setup build
	fi
}

mbuild() {
	_meson_setup
	meson compile -C build "$@"
}

mtest() {
	_meson_setup
	meson test -C build "$@"
}

mdist() {
	_meson_setup
	meson dist -C build --formats xztar,gztar,zip "$@"
}
